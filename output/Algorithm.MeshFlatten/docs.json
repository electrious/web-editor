{"reExports":[],"name":"Algorithm.MeshFlatten","comments":null,"declarations":[{"children":[],"comments":"vertex data that will be inserted into RTree\n","title":"VertexItem","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["RBush","RBush"],"BBox"]},{"annotation":[],"tag":"RCons","contents":["vertex",{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]},{"annotation":[],"tag":"RCons","contents":["normal",{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]},{"annotation":[],"tag":"RCons","contents":["index",{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Int"]},{"annotation":[],"tag":"REmpty"}]}]}]}]}},"sourceSpan":{"start":[20,1],"name":"src/algorithm/MeshFlatten.purs","end":[20,75]}},{"children":[],"comments":"offset used to calculate bounding box for a point\n","title":"vertexOffset","info":{"declType":"value","type":{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Number"]}},"sourceSpan":{"start":[23,1],"name":"src/algorithm/MeshFlatten.purs","end":[23,23]}},{"children":[],"comments":"calculate VertexItem for a vertex point\n","title":"vertexItem","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Int"]}]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"VertexItem"]}]}]}]}},"sourceSpan":{"start":[27,1],"name":"src/algorithm/MeshFlatten.purs","end":[27,54]}},{"children":[],"comments":"build an RTree from a list of vertices\n","title":"buildRTree","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Array"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Array"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Effect"],"Effect"]},{"annotation":[],"tag":"ParensInType","contents":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["RBush","RBush"],"RBush"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"VertexItem"]}]}}]}]}]}},"sourceSpan":{"start":[42,1],"name":"src/algorithm/MeshFlatten.purs","end":[42,74]}},{"children":[],"comments":"get the bounding box of a polygon\n","title":"polygonBoundingBox","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Models","RoofPlate"],"Polygon"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["RBush","RBush"],"BBox"]},{"annotation":[],"tag":"REmpty"}]}]}},"sourceSpan":{"start":[53,1],"name":"src/algorithm/MeshFlatten.purs","end":[53,41]}},{"children":[],"comments":null,"title":"RoofFlattener","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Record"]},{"annotation":[],"tag":"RCons","contents":["roofNormal",{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]},{"annotation":[],"tag":"RCons","contents":["roofCenter",{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]},{"annotation":[],"tag":"RCons","contents":["roofPolygon",{"annotation":[],"tag":"TypeConstructor","contents":[["Models","RoofPlate"],"Polygon"]},{"annotation":[],"tag":"REmpty"}]}]}]}]}},"sourceSpan":{"start":[62,1],"name":"src/algorithm/MeshFlatten.purs","end":[66,2]}},{"children":[],"comments":"flatten a vertex, returns a new position for that vertex\n","title":"flatten","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"RoofFlattener"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]}]}},"sourceSpan":{"start":[69,1],"name":"src/algorithm/MeshFlatten.purs","end":[69,47]}},{"children":[],"comments":"calculate distance from the param position to the roof\n","title":"distToRoof","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"RoofFlattener"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]}]},{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Number"]}]}]}},"sourceSpan":{"start":[75,1],"name":"src/algorithm/MeshFlatten.purs","end":[75,49]}},{"children":[],"comments":"get the RoofFlattener for a roof\n","title":"roofFlattener","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Models","RoofPlate"],"RoofPlate"]}]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"RoofFlattener"]}]}},"sourceSpan":{"start":[80,1],"name":"src/algorithm/MeshFlatten.purs","end":[80,44]}},{"children":[],"comments":"flattened vertex info\n","title":"FlattenedVertex","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Record"]},{"annotation":[],"tag":"RCons","contents":["index",{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Int"]},{"annotation":[],"tag":"RCons","contents":["newPos",{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Math","Vector"],"Vector3"]},{"annotation":[],"tag":"REmpty"}]}]}]}},"sourceSpan":{"start":[84,1],"name":"src/algorithm/MeshFlatten.purs","end":[87,2]}},{"children":[],"comments":"apply the flattened vertices to the BufferGeometry and return a new one\n","title":"applyFlattenedVertex","info":{"declType":"value","type":{"annotation":[],"tag":"ForAll","contents":["geo",{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Core","Geometry"],"BufferGeometry"]},{"annotation":[],"tag":"TypeVar","contents":"geo"}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Array"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"FlattenedVertex"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Effect"],"Effect"]},{"annotation":[],"tag":"ParensInType","contents":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Core","Geometry"],"BufferGeometry"]},{"annotation":[],"tag":"TypeVar","contents":"geo"}]}}]}]}]},null]}},"sourceSpan":{"start":[90,1],"name":"src/algorithm/MeshFlatten.purs","end":[90,111]}},{"children":[],"comments":"Flatten a single roof plate\n","title":"flattenRoofplate","info":{"declType":"value","type":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["RBush","RBush"],"RBush"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"VertexItem"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Models","RoofPlate"],"RoofPlate"]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Effect"],"Effect"]},{"annotation":[],"tag":"ParensInType","contents":{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Array"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"FlattenedVertex"]}]}}]}]}]}},"sourceSpan":{"start":[105,1],"name":"src/algorithm/MeshFlatten.purs","end":[105,84]}},{"children":[],"comments":"flatten all roofplates\n","title":"flattenRoofPlates","info":{"declType":"value","type":{"annotation":[],"tag":"ForAll","contents":["geo",{"annotation":[],"tag":"ForAll","contents":["a",{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Core","Geometry"],"BufferGeometry"]},{"annotation":[],"tag":"TypeVar","contents":"geo"}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["RBush","RBush"],"RBush"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Algorithm","MeshFlatten"],"VertexItem"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Three","Core","Mesh"],"Mesh"]},{"annotation":[],"tag":"TypeVar","contents":"a"}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Function"]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Prim"],"Array"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Models","RoofPlate"],"RoofPlate"]}]}]},{"annotation":[],"tag":"TypeApp","contents":[{"annotation":[],"tag":"TypeConstructor","contents":[["Effect"],"Effect"]},{"annotation":[],"tag":"TypeConstructor","contents":[["Data","Unit"],"Unit"]}]}]}]}]}]},null]},null]}},"sourceSpan":{"start":[131,1],"name":"src/algorithm/MeshFlatten.purs","end":[131,118]}}]}
// Generated by purs version 0.13.6
"use strict";
var Control_Monad = require("../Control.Monad/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_Unit = require("../Data.Unit/index.js");
var Effect = require("../Effect/index.js");
var Effect_Ref = require("../Effect.Ref/index.js");
var FRP_Event = require("../FRP.Event/index.js");
var Web_HTML = require("../Web.HTML/index.js");
var Web_HTML_Window = require("../Web.HTML.Window/index.js");
var animationFrame = FRP_Event.makeEvent(function (k) {
    return function __do() {
        var w = Web_HTML.window();
        var cancelled = Effect_Ref["new"](false)();
        var loop = Data_Functor["void"](Effect.functorEffect)(Web_HTML_Window.requestAnimationFrame(function __do() {
            k(Data_Unit.unit)();
            return Control_Monad.unlessM(Effect.monadEffect)(Effect_Ref.read(cancelled))(loop)();
        })(w));
        loop();
        return Effect_Ref.write(true)(cancelled);
    };
});
module.exports = {
    animationFrame: animationFrame
};
